(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();let e=[];class n{constructor(t){this.title=t}}function o(t){let e=l();for(let n=0;e.length>n;n++)if(e[n].title===t)return e[n]}function i(t,e){let n=o(t);n.todoList,function(t,e){let n=l();for(let o=0;n.length>o;o++)n[o].title===t.title&&(n[o].todoList[`${e.title}`]=e);localStorage.setItem("projects",JSON.stringify(n))}(n,e)}function l(){return JSON.parse(localStorage.getItem("projects"))}n.prototype.changeTitle=function(t){this.title=t};const c=t.p+"e3b6ef0fc8b1ecd5d1a9.svg",s=t.p+"8d317290131028fe10cf.svg",a=t.p+"365f3e7f182c9f913994.svg",r=t.p+"97d4c0a10ac97607dc65.svg";function d(t){const e=document.querySelector(".todo-list");e.textContent="";const n=document.createElement("h1");n.className="tab-title";let o=JSON.parse(localStorage.getItem("projects"));for(let i=0;o.length>i;i++)if(o[i].title===t){n.textContent=o[i].title,e.append(n);for(const n in o[i].todoList){let l=p(o[i].todoList[n],t);e.append(l)}}}function u(t){const e=document.querySelector(".project-list"),n=document.createElement("li");n.className="project",n.dataset.name=t.title;const o=new Image;o.src=a;const i=document.createElement("p");i.textContent=t.title;const c=new Image;c.style.display="none",c.src=r,i.addEventListener("click",(e=>{m(n),d(t.title)})),n.addEventListener("mouseover",(t=>{c.style.display="block"})),n.addEventListener("mouseout",(t=>{c.style.display="none"})),c.addEventListener("click",(e=>{n.remove(),function(t){let e=l();for(let n=0;e.length>n;n++)if(e[n].title===t){delete e[n];let t=e.filter((t=>t));localStorage.setItem("projects",JSON.stringify(t))}}(t.title);let o=document.querySelector('[data-name="inbox"]');d("inbox"),m(o)})),n.append(o,i,c),e.append(n)}function m(t){let e=document.querySelector(".sidebar").children;for(let t=0;e.length>t;t++)if(e[t].classList.contains("main-list")||e[t].classList.contains("project-list")){let n=e[t].children[0].children;for(let t=0;n.length>t;t++)n[t].classList.contains("active")&&n[t].classList.toggle("active")}t.classList.toggle("active")}function p(t,e){const n=document.createElement("div");n.className="todo-item-container",n.dataset.name=t.title;const o=document.createElement("div");o.className="todo-item";const i=new Image;i.src=c,i.className="todo-item-checkmark";const a=document.createElement("p");a.className="todo-item-title",a.textContent=t.title;const r=document.createElement("p");r.textContent=t.dueDate;const d=new Image;return d.className="todo-item-edit",d.src=s,i.addEventListener("click",(n=>{o.remove(),function(t,e){let n=l();for(let o=0;n.length>o;o++)n[o].title===e&&(delete n[o].todoList[`${t.title}`],localStorage.setItem("projects",JSON.stringify(n)))}(t,e)})),o.addEventListener("mouseover",(t=>{d.style.display="block"})),o.addEventListener("mouseout",(t=>{d.style.display="none"})),a.addEventListener("click",(e=>{f(t,n,o,d)})),d.addEventListener("click",(e=>{f(t,n,o,d)})),o.append(i,a,r,d),n.append(o),n}function f(t,e,n,i){if(!0===e.classList.contains("active-todo-item"))document.querySelector(".edit-container").remove(),e.classList.toggle("active-todo-item"),n.classList.toggle("edit-container-active");else{n.classList.add("edit-container-active"),i.style.display="block",o(v());let c=document.createElement("div");c.className="edit-container";let s=document.createElement("label");s.className="edit-title-label",s.setAttribute("for","edit-title"),s.textContent="Title:";let a=document.createElement("input");a.setAttribute("id","edit-title"),a.value=t.title;let r=document.createElement("label");r.textContent="Due Date:",r.setAttribute("for","edit-date");let u=document.createElement("input");u.setAttribute("id","edit-date"),u.setAttribute("type","date");let m=document.createElement("label");m.className="edit-priority-label",m.setAttribute("for","edit-priority"),m.textContent="Priority:";let p=document.createElement("input");p.setAttribute("id","edit-priority"),p.setAttribute("type","number"),p.setAttribute("max",5),p.setAttribute("min",1),p.value=t.priority;let f=document.createElement("label");f.setAttribute("for","edit-description"),f.textContent="Description:";let g=document.createElement("textarea");g.setAttribute("id","edit-description"),g.value=t.description,g.placeholder="abcd your description comes here I think";let y=document.createElement("button");y.className="edit-save",y.textContent="Save",y.addEventListener("click",(e=>{let n=v();!function(t,e,n,o,i,c){let s=function(t,e,n){let o=[];return""===t?"no title":(""===e&&o.push("No Due Date"),""===n&&o.push(5),o)}(e,o,i),a=l();for(let l=0;a.length>l;l++)if(a[l].title===c){let c=a[l].todoList[t.title];a[l].todoList[e]=c,delete a[l].todoList[t.title];let r=a[l].todoList[e]=c;if("no title"===s)alert("Title cannot be empty!");else{r.title=e,r.description=n,r.dueDate=o,r.priority=parseInt(i);for(let t=0;s.length>=t;t++)"No Due Date"===s[t]&&(r.dueDate="No Due Date"),"number"==typeof s[t]&&(r.priority=5)}}localStorage.setItem("projects",JSON.stringify(a))}(t,a.value,g.value,u.value,p.value,n),d(n)})),c.append(s,a,m,p,f,g,r,u,y),e.append(c),e.classList.add("active-todo-item")}let c=document.querySelector(".todo-list").children;for(let e=0;c.length>e;e++)if(c[e].classList.contains("active-todo-item"))if(c[e].dataset.name===t.title)console.log("JEST THE LEST YOU MEST FUCK THE REST");else{let t=c[e].children;for(let n=0;t.length>n;n++)t[n].classList.contains("edit-container")&&(t[n].remove(),c[e].classList.toggle("active-todo-item"),c[e].children[0].classList.toggle("edit-container-active"))}}function g(){const t=document.querySelector(".todo"),e=document.querySelector(".task-add"),n=document.createElement("div");n.className="task-add-input";const o=document.createElement("input");o.className="task-add-title";const c=document.createElement("button");c.className="task-add-cancel",c.textContent="Cancel";const s=document.createElement("button");return s.className="task-add-submit",s.textContent="Submit",e.style.display="none",n.append(o,s,c),t.append(n),function(t,e,n,o){const c=document.querySelector(".task-add"),s=v();t.addEventListener("click",(t=>{!function(t,e){let n=function(t,e){let n=l();if(""===t)return"blank";for(let o=0;n.length>o;o++)if(n[o].title===e)for(let e in n[o].todoList)if(e===t)return!1}(t,e);!1===n?(alert("Todo item must be different"),g()):"blank"===n?(alert("Todo item must not be blank"),g()):i(e,new y(t))}(n.value,s),d(s),c.style.display="grid",o.remove()})),e.addEventListener("click",(t=>{c.style.display="grid",o.remove()}))}(s,c,o,n),o}function v(){return document.querySelector(".active").dataset.name}class y{constructor(t,e="",n="No Due Date",o=5,i=""){this.title=t,this.description=e,this.dueDate=n,this.priority=o,this.notes=i}}null===localStorage.getItem("firstTime")&&(localStorage.setItem("firstTime","false"),function(){const t=new n("inbox"),o=new n("today"),l=new n("upcoming"),c=new y("Complete the Todo List Project","The Odin Project Todo Project!","2022-07-12",5,"");(function(...t){for(let n=0;t.length>n;n++){let o={title:t[n].title,todoList:{}};e.push(o)}localStorage.setItem("projects",JSON.stringify(e))})(t,o,l),i(t.title,c)}()),d("inbox"),function(){let t=l();for(let e=0;t.length>e;e++)"inbox"===t[e].title||"today"===t[e].title||"upcoming"===t[e].title?console.log("wut"):u(t[e])}(),document.querySelector(".task-add").addEventListener("click",(t=>{v(),g()})),function(){const t=document.querySelector(".add-project");t.addEventListener("click",(e=>{!function(t){const e=document.querySelector(".project-list"),n=document.createElement("div");n.className="project-add-div";const o=document.createElement("input");o.className="project-add-title";const i=document.createElement("button");i.className="project-add-cancel",i.textContent="Cancel";const c=document.createElement("button");var s,a,r,d;c.className="project-add-submit",c.textContent="Submit",t.style.display="none",s=o,a=n,r=i,d=t,c.addEventListener("click",(t=>{u(function(t){let e=function(t){let e=l();if(""===t)return"blank";for(let n=0;e.length>n;n++)if(console.log[e[n].title],e[n].title===t)return!0}(t);if(!0===e)alert("Project names must be different");else{if("blank"!==e){let e=l(),n={title:t,todoList:{}};return e.push(n),localStorage.setItem("projects",JSON.stringify(e)),n}alert("Project names must not be blank")}}(s.value)),a.remove(),d.style.display="grid"})),r.addEventListener("click",(t=>{d.style.display="grid",a.remove()})),n.append(o,c,i),e.append(n)}(t)}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFOcUJKLEVBQXRCbEIsRUFPdkN6RCxpQkFBaUIsU0FBUzNELElBRTdCK0MsRUR4UlIsU0FBdUJ2QixHQUNuQixJQUFJaUUsRUF1QlIsU0FBMEJqRSxHQUN0QixJQUFJRyxFQUFlTixJQUVuQixHQUFtQixLQUFoQkcsRUFDQyxNQUFPLFFBR1gsSUFBSSxJQUFJRixFQUFJLEVBQUdLLEVBQWFqQixPQUFTWSxFQUFHQSxJQUdwQyxHQUZBc0YsUUFBUUMsSUFBSWxGLEVBQWFMLEdBQUdMLE9BRXpCVSxFQUFhTCxHQUFHTCxRQUFVTyxFQUN6QixPQUFPLENBR25CLENBckNnQm1ILENBQWlCbkgsR0FFN0IsSUFBYSxJQUFWaUUsRUFDQ2UsTUFBTSx1Q0FDSCxJQUFhLFVBQVZmLEVBRUgsQ0FDSCxJQUFJckUsRUFBZ0JDLElBRWhCRixFQUFVLENBQ1YsTUFBU0ssRUFDVCxTQUFZLENBRVosR0FNSixPQUhBSixFQUFjaUYsS0FBS2xGLEdBQ25CUSxhQUFhQyxRQUFRLFdBQVlDLEtBQUtDLFVBQVVWLElBRXpDRCxDQUNYLENBZklxRixNQUFNLGtDQWVWLENBQ0osQ0NpUXNCb0MsQ0FBYzNILEVBQU13RSxRQUVsQzhCLEVBQUkxRCxTQUNKNkUsRUFBT2pGLE1BQU1DLFFBQVUsTUFBTSxJQUdqQzRELEVBQU8zRCxpQkFBaUIsU0FBUzNELElBQzdCMEksRUFBT2pGLE1BQU1DLFFBQVUsT0FDdkI2RCxFQUFJMUQsUUFBUSxJQWRoQjJFLEVBQWM3RixPQUFPOEYsRUFBaUJyQixFQUFXRCxHQUNqRG9CLEVBQVk1RixPQUFPNkYsRUFDdkIsQ0EzQlFLLENBQW1CUixFQUFjLEdBRXpDLENBVElTLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy93ZWJzaXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwibGV0IHByb2plY3RzID0gW107XHJcblxyXG5jbGFzcyBQcm9qZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgfVxyXG59XHJcblxyXG5Qcm9qZWN0LnByb3RvdHlwZS5jaGFuZ2VUaXRsZSA9IGZ1bmN0aW9uKG5ld1RpdGxlKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gbmV3VGl0bGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3QocHJvamVjdE5hbWUpIHtcclxuICAgIGxldCB2YWx1ZSA9IGNoZWNrSWZBdmFpbGFibGUocHJvamVjdE5hbWUpO1xyXG5cclxuICAgIGlmKHZhbHVlID09PSB0cnVlKSB7XHJcbiAgICAgICAgYWxlcnQoXCJQcm9qZWN0IG5hbWVzIG11c3QgYmUgZGlmZmVyZW50XCIpO1xyXG4gICAgfSBlbHNlIGlmKHZhbHVlID09PSBcImJsYW5rXCIpIHtcclxuICAgICAgICBhbGVydChcIlByb2plY3QgbmFtZXMgbXVzdCBub3QgYmUgYmxhbmtcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICAgICAgbGV0IHByb2plY3QgPSB7XHJcbiAgICAgICAgICAgIFwidGl0bGVcIjogcHJvamVjdE5hbWUsXHJcbiAgICAgICAgICAgIFwidG9kb0xpc3RcIjoge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGxvY2FsUHJvamVjdHMucHVzaChwcm9qZWN0KTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShsb2NhbFByb2plY3RzKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwcm9qZWN0O1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0lmQXZhaWxhYmxlKHByb2plY3ROYW1lKSB7XHJcbiAgICBsZXQgbG9jYWxTdG9yYWdlID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBpZihwcm9qZWN0TmFtZSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gXCJibGFua1wiO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGxvY2FsU3RvcmFnZS5sZW5ndGggPiBpOyBpKyspIHtcclxuICAgICAgICBjb25zb2xlLmxvZ1tsb2NhbFN0b3JhZ2VbaV0udGl0bGVdO1xyXG5cclxuICAgICAgICBpZihsb2NhbFN0b3JhZ2VbaV0udGl0bGUgPT09IHByb2plY3ROYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdHMoLi4uYXJncykgeyAgICBcclxuICAgIGZvcihsZXQgaSA9IDA7IGFyZ3MubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHRpdGxlID0gYXJnc1tpXS50aXRsZTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdmFsdWUgPSB7XHJcbiAgICAgICAgICAgIFwidGl0bGVcIjogdGl0bGUsXHJcbiAgICAgICAgICAgIFwidG9kb0xpc3RcIjoge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvamVjdHMucHVzaCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZWFyY2hGb3JQcm9qZWN0KHByb2plY3QpIHtcclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QpIHtcclxuICAgICAgICAgICAgbGV0IHByb2plY3QgPSBsb2NhbFByb2plY3RzW2ldO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlYXJjaEZvclRvZG9JblByb2plY3QocHJvamVjdCwgdG9kb0l0ZW0pIHtcclxuICAgIGxldCByZXN1bHQgPSBwcm9qZWN0LnRvZG9MaXN0W2Ake3RvZG9JdGVtfWBdO1xyXG5cclxuICAgIGlmKHJlc3VsdCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIHJldHVybiBcIk9vcHNpZXNcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9kb1RvUHJvamVjdChwcm9qZWN0TmFtZSwgdG9kb0l0ZW0pIHtcclxuICAgIGxldCBwcm9qZWN0ID0gc2VhcmNoRm9yUHJvamVjdChwcm9qZWN0TmFtZSk7XHJcblxyXG4gICAgaWYocHJvamVjdC50b2RvTGlzdCA9PT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgIHRvZG9MaXN0KHByb2plY3QsIHRvZG9JdGVtKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9kb0xpc3QocHJvamVjdCwgdG9kb0l0ZW0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9kb0xpc3QocHJvamVjdCwgdG9kb0l0ZW0pIHtcclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QudGl0bGUpIHtcclxuXHJcbiAgICAgICAgICAgIGxvY2FsUHJvamVjdHNbaV1bXCJ0b2RvTGlzdFwiXVtgJHt0b2RvSXRlbS50aXRsZX1gXSA9IHRvZG9JdGVtO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShsb2NhbFByb2plY3RzKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVRvZG9JdGVtKG9iaiwgcHJvamVjdCkge1xyXG5cclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGxvY2FsUHJvamVjdHNbaV1bXCJ0b2RvTGlzdFwiXVtgJHtvYmoudGl0bGV9YF07XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShsb2NhbFByb2plY3RzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVQcm9qZWN0KHByb2plY3QpIHtcclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGxvY2FsUHJvamVjdHNbaV07XHJcblxyXG4gICAgICAgICAgICBsZXQgZmlsdGVyZWRQcm9qZWN0cyA9IGxvY2FsUHJvamVjdHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSk7XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZFByb2plY3RzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2VQcm9qZWN0cygpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpKTtcclxufVxyXG5cclxuLy8gZ2V0IGl0ZW1zIGZyb20gTG9jYWwgU3RvcmFnZVxyXG4vLyAgICAgbGV0IGNvbnNvbGVSZWFkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdHMnKSk7XHJcblxyXG5leHBvcnQge1xyXG4gICAgUHJvamVjdCxcclxuICAgIGNyZWF0ZVByb2plY3RzLFxyXG4gICAgY3JlYXRlUHJvamVjdCxcclxuICAgIGFkZFRvZG9Ub1Byb2plY3QsXHJcbiAgICBkZWxldGVUb2RvSXRlbSxcclxuICAgIHNlYXJjaEZvclByb2plY3QsXHJcbiAgICBzZWFyY2hGb3JUb2RvSW5Qcm9qZWN0LFxyXG4gICAgZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMsXHJcbiAgICBkZWxldGVQcm9qZWN0XHJcbn0iLCJpbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBkZWxldGVUb2RvSXRlbSwgZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMsIHNlYXJjaEZvclByb2plY3QsIGRlbGV0ZVByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xyXG5pbXBvcnQgQ2lyY2xlSWNvbiBmcm9tIFwiLi4vZGlzdC9pbWFnZXMvY2lyY2xlLnN2Z1wiO1xyXG5pbXBvcnQgRWRpdEljb24gZnJvbSBcIi4uL2Rpc3QvaW1hZ2VzL3BlbmNpbC5zdmdcIjtcclxuaW1wb3J0IGxpc3RJY29uIGZyb20gXCIuLi9kaXN0L2ltYWdlcy9mb3JtYXQtbGlzdC1idWxsZXRlZC5zdmdcIjtcclxuaW1wb3J0IGRlbGV0ZUljb24gZnJvbSBcIi4uL2Rpc3QvaW1hZ2VzL2Nsb3NlLnN2Z1wiXHJcbmltcG9ydCB7IGNyZWF0ZVRvZG8sIGVkaXRUb2RvIH0gZnJvbSBcIi4vdG9kby5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdGlhbGl6YXRpb24oKSB7XHJcbiAgICB0YWIoXCJpbmJveFwiKTtcclxuICAgIGFkZFByb2plY3RzVG9MaXN0KCk7XHJcbiAgICBhZGRUYXNrKCk7XHJcbiAgICBldmVudExpc3RlbmVycygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0YWIocHJvamVjdCkge1xyXG4gICAgY29uc3QgdG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1saXN0XCIpO1xyXG4gICAgdG9kby50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XHJcbiAgICB0b2RvVGl0bGUuY2xhc3NOYW1lID0gXCJ0YWItdGl0bGVcIjtcclxuXHJcbiAgICBsZXQgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBwcm9qZWN0cy5sZW5ndGggPiBpOyBpKyspIHtcclxuICAgICAgICBpZihwcm9qZWN0c1tpXS50aXRsZSA9PT0gcHJvamVjdCkge1xyXG4gICAgICAgICAgICB0b2RvVGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0c1tpXS50aXRsZTtcclxuICAgICAgICAgICAgdG9kby5hcHBlbmQodG9kb1RpdGxlKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihjb25zdCBwcm9wIGluIHByb2plY3RzW2ldLnRvZG9MaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqID0gcHJvamVjdHNbaV0udG9kb0xpc3RbcHJvcF07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBET01jcmVhdGVUb2RvSXRlbShvYmosIHByb2plY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRvZG8uYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQcm9qZWN0c1RvTGlzdCgpIHtcclxuICAgIGxldCBwcm9qZWN0cyA9IGdldExvY2FsU3RvcmFnZVByb2plY3RzKCk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgcHJvamVjdHMubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgaWYocHJvamVjdHNbaV0udGl0bGUgPT09IFwiaW5ib3hcIiB8fCBwcm9qZWN0c1tpXS50aXRsZSA9PT0gXCJ0b2RheVwiIHx8IHByb2plY3RzW2ldLnRpdGxlID09PSBcInVwY29taW5nXCIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3dXRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3JlYXRlUHJvamVjdEl0ZW0ocHJvamVjdHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdEl0ZW0ocHJvamVjdE9iaikge1xyXG4gICAgY29uc3QgbWFpblByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKTtcclxuICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTmFtZSA9IFwicHJvamVjdFwiO1xyXG4gICAgcHJvamVjdENvbnRhaW5lci5kYXRhc2V0Lm5hbWUgPSBwcm9qZWN0T2JqLnRpdGxlO1xyXG5cclxuICAgIGNvbnN0IHByb2plY3RJY29uID0gbmV3IEltYWdlKCk7XHJcbiAgICBwcm9qZWN0SWNvbi5zcmMgPSBsaXN0SWNvbjtcclxuXHJcbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RPYmoudGl0bGU7XHJcblxyXG4gICAgY29uc3QgcHJvamVjdERlbGV0ZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgcHJvamVjdERlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBwcm9qZWN0RGVsZXRlLnNyYyA9IGRlbGV0ZUljb247XHJcblxyXG4gICAgcHJvamVjdFRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBhY3RpdmVDbGFzcyhwcm9qZWN0Q29udGFpbmVyKTtcclxuICAgICAgICBcclxuICAgICAgICB0YWIocHJvamVjdE9iai50aXRsZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBwcm9qZWN0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZSA9PiB7XHJcbiAgICAgICAgcHJvamVjdERlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvamVjdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZSA9PiB7XHJcbiAgICAgICAgcHJvamVjdERlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICBwcm9qZWN0RGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgICAgIGRlbGV0ZVByb2plY3QocHJvamVjdE9iai50aXRsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGluZGV4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cImluYm94XCJdJyk7XHJcbiAgICAgICAgdGFiKFwiaW5ib3hcIik7XHJcbiAgICAgICAgYWN0aXZlQ2xhc3MoaW5kZXgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmQocHJvamVjdEljb24sIHByb2plY3RUaXRsZSwgcHJvamVjdERlbGV0ZSk7XHJcbiAgICBtYWluUHJvamVjdENvbnRhaW5lci5hcHBlbmQocHJvamVjdENvbnRhaW5lcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGl2ZUNsYXNzKGVsZW1lbnQpIHtcclxuICAgIGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyXCIpLmNoaWxkcmVuO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGxpc3QubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgaWYobGlzdFtpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJtYWluLWxpc3RcIikgfHwgbGlzdFtpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9qZWN0LWxpc3RcIikpIHtcclxuICAgICAgICAgICAgbGV0IGxpQXJyYXkgPSBsaXN0W2ldLmNoaWxkcmVuWzBdLmNoaWxkcmVuO1xyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgbGlBcnJheS5sZW5ndGggPiBqOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKGxpQXJyYXlbal0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlBcnJheVtqXS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBET01jcmVhdGVUb2RvSXRlbShvYmosIHByb2plY3QpIHtcclxuICAgIGNvbnN0IHRvZG9JdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRvZG9JdGVtQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwidG9kby1pdGVtLWNvbnRhaW5lclwiO1xyXG4gICAgdG9kb0l0ZW1Db250YWluZXIuZGF0YXNldC5uYW1lID0gb2JqLnRpdGxlO1xyXG5cclxuICAgIGNvbnN0IHRvZG9JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRvZG9JdGVtLmNsYXNzTmFtZSA9IFwidG9kby1pdGVtXCI7XHJcblxyXG4gICAgY29uc3QgY2lyY2xlID0gbmV3IEltYWdlKCk7XHJcbiAgICBjaXJjbGUuc3JjID0gQ2lyY2xlSWNvbjtcclxuICAgIGNpcmNsZS5jbGFzc05hbWUgPSBcInRvZG8taXRlbS1jaGVja21hcmtcIjtcclxuXHJcbiAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIHRvZG9UaXRsZS5jbGFzc05hbWUgPSBcInRvZG8taXRlbS10aXRsZVwiO1xyXG4gICAgdG9kb1RpdGxlLnRleHRDb250ZW50ID0gb2JqLnRpdGxlO1xyXG5cclxuICAgIGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICB0b2RvRGF0ZS50ZXh0Q29udGVudCA9IG9iai5kdWVEYXRlO1xyXG5cclxuICAgIGNvbnN0IHRvZG9FZGl0ID0gbmV3IEltYWdlKCk7XHJcbiAgICB0b2RvRWRpdC5jbGFzc05hbWUgPSBcInRvZG8taXRlbS1lZGl0XCI7XHJcbiAgICB0b2RvRWRpdC5zcmMgPSBFZGl0SWNvbjtcclxuXHJcbiAgICBjaXJjbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICAgIHRvZG9JdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIGRlbGV0ZVRvZG9JdGVtKG9iaiwgcHJvamVjdCk7XHJcbiAgICB9KVxyXG5cclxuICAgIHRvZG9JdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZSA9PiB7XHJcbiAgICAgICAgdG9kb0VkaXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0b2RvSXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZSA9PiB7XHJcbiAgICAgICAgdG9kb0VkaXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH0pO1xyXG5cclxuICAgIHRvZG9UaXRsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgRE9NZWRpdFRvZG9JdGVtKG9iaiwgdG9kb0l0ZW1Db250YWluZXIsIHRvZG9JdGVtLCB0b2RvRWRpdCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0b2RvRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgRE9NZWRpdFRvZG9JdGVtKG9iaiwgdG9kb0l0ZW1Db250YWluZXIsIHRvZG9JdGVtLCB0b2RvRWRpdCk7XHJcbiAgICB9KVxyXG5cclxuICAgIHRvZG9JdGVtLmFwcGVuZChjaXJjbGUsIHRvZG9UaXRsZSwgdG9kb0RhdGUsIHRvZG9FZGl0KTtcclxuICAgIHRvZG9JdGVtQ29udGFpbmVyLmFwcGVuZCh0b2RvSXRlbSk7XHJcblxyXG4gICAgcmV0dXJuIHRvZG9JdGVtQ29udGFpbmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBET01lZGl0VG9kb0l0ZW0ob2JqLCBjb250YWluZXIsIHRvZG9JdGVtQ29udGFpbmVyLCB0b2RvRWRpdCkge1xyXG4gICAgaWYoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS10b2RvLWl0ZW1cIikgPT09IHRydWUpIHtcclxuICAgICAgICBsZXQgZWRpdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1jb250YWluZXJcIik7XHJcbiAgICAgICAgZWRpdENvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZS10b2RvLWl0ZW1cIik7XHJcbiAgICAgICAgdG9kb0l0ZW1Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImVkaXQtY29udGFpbmVyLWFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9kb0l0ZW1Db250YWluZXIuY2xhc3NMaXN0LmFkZChcImVkaXQtY29udGFpbmVyLWFjdGl2ZVwiKTtcclxuICAgICAgICB0b2RvRWRpdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBnZXRQcm9qZWN0TmFtZSgpO1xyXG4gICAgICAgIGxldCBwcm9qZWN0ID0gc2VhcmNoRm9yUHJvamVjdChwcm9qZWN0TmFtZSk7XHJcbiAgICBcclxuICAgICAgICBsZXQgZWRpdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWRpdENvbnRhaW5lci5jbGFzc05hbWUgPSBcImVkaXQtY29udGFpbmVyXCI7XHJcblxyXG4gICAgICAgIGxldCBlZGl0VGl0bGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBlZGl0VGl0bGVMYWJlbC5jbGFzc05hbWUgPSBcImVkaXQtdGl0bGUtbGFiZWxcIjtcclxuICAgICAgICBlZGl0VGl0bGVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJlZGl0LXRpdGxlXCIpO1xyXG4gICAgICAgIGVkaXRUaXRsZUxhYmVsLnRleHRDb250ZW50ID0gXCJUaXRsZTpcIlxyXG5cclxuICAgICAgICBsZXQgZWRpdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGVkaXRUaXRsZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImVkaXQtdGl0bGVcIik7XHJcbiAgICAgICAgZWRpdFRpdGxlLnZhbHVlID0gb2JqLnRpdGxlO1xyXG5cclxuICAgICAgICBsZXQgZWRpdERhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBlZGl0RGF0ZUxhYmVsLnRleHRDb250ZW50ID0gXCJEdWUgRGF0ZTpcIlxyXG4gICAgICAgIGVkaXREYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZWRpdC1kYXRlXCIpO1xyXG5cclxuICAgICAgICBsZXQgZWRpdERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgZWRpdERhdGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJlZGl0LWRhdGVcIik7XHJcbiAgICAgICAgZWRpdERhdGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XHJcblxyXG4gICAgICAgIGxldCBlZGl0UHJpb3JpdHlMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBlZGl0UHJpb3JpdHlMYWJlbC5jbGFzc05hbWUgPSBcImVkaXQtcHJpb3JpdHktbGFiZWxcIjtcclxuICAgICAgICBlZGl0UHJpb3JpdHlMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJlZGl0LXByaW9yaXR5XCIpO1xyXG4gICAgICAgIGVkaXRQcmlvcml0eUxhYmVsLnRleHRDb250ZW50ID0gXCJQcmlvcml0eTpcIjtcclxuXHJcbiAgICAgICAgbGV0IGVkaXRQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBlZGl0UHJpb3JpdHkuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJlZGl0LXByaW9yaXR5XCIpXHJcbiAgICAgICAgZWRpdFByaW9yaXR5LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJudW1iZXJcIik7XHJcbiAgICAgICAgZWRpdFByaW9yaXR5LnNldEF0dHJpYnV0ZShcIm1heFwiLCA1KTtcclxuICAgICAgICBlZGl0UHJpb3JpdHkuc2V0QXR0cmlidXRlKFwibWluXCIsIDEpO1xyXG4gICAgICAgIGVkaXRQcmlvcml0eS52YWx1ZSA9IG9iai5wcmlvcml0eTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgZWRpdERlc2NyaXB0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICAgICAgZWRpdERlc2NyaXB0aW9uTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZWRpdC1kZXNjcmlwdGlvblwiKTtcclxuICAgICAgICBlZGl0RGVzY3JpcHRpb25MYWJlbC50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb246XCI7XHJcblxyXG4gICAgICAgIGxldCBlZGl0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcbiAgICAgICAgZWRpdERlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZWRpdC1kZXNjcmlwdGlvblwiKTtcclxuICAgICAgICBlZGl0RGVzY3JpcHRpb24udmFsdWUgPSBvYmouZGVzY3JpcHRpb247XHJcbiAgICAgICAgZWRpdERlc2NyaXB0aW9uLnBsYWNlaG9sZGVyID0gXCJhYmNkIHlvdXIgZGVzY3JpcHRpb24gY29tZXMgaGVyZSBJIHRoaW5rXCI7XHJcblxyXG4gICAgICAgIGxldCBzYXZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBzYXZlQnV0dG9uLmNsYXNzTmFtZSA9IFwiZWRpdC1zYXZlXCI7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG5cclxuICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICAgICAgbGV0IHByb2plY3ROYW1lID0gZ2V0UHJvamVjdE5hbWUoKTtcclxuICAgICAgICAgICAgZWRpdFRvZG8ob2JqLCBlZGl0VGl0bGUudmFsdWUsIGVkaXREZXNjcmlwdGlvbi52YWx1ZSwgZWRpdERhdGUudmFsdWUsIGVkaXRQcmlvcml0eS52YWx1ZSwgcHJvamVjdE5hbWUpO1xyXG4gICAgICAgICAgICB0YWIocHJvamVjdE5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlZGl0Q29udGFpbmVyLmFwcGVuZChlZGl0VGl0bGVMYWJlbCwgZWRpdFRpdGxlLCBlZGl0UHJpb3JpdHlMYWJlbCwgZWRpdFByaW9yaXR5LCBlZGl0RGVzY3JpcHRpb25MYWJlbCwgZWRpdERlc2NyaXB0aW9uLCBlZGl0RGF0ZUxhYmVsLCBlZGl0RGF0ZSwgc2F2ZUJ1dHRvbik7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZChlZGl0Q29udGFpbmVyKTtcclxuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS10b2RvLWl0ZW1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tbGlzdFwiKTtcclxuICAgIGxldCB0b2RvTGlzdENoaWxkcmVuID0gdG9kb0xpc3QuY2hpbGRyZW47XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgdG9kb0xpc3RDaGlsZHJlbi5sZW5ndGggPiBpOyBpKyspIHtcclxuICAgICAgICBpZih0b2RvTGlzdENoaWxkcmVuW2ldLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS10b2RvLWl0ZW1cIikpIHtcclxuICAgICAgICAgICAgaWYodG9kb0xpc3RDaGlsZHJlbltpXS5kYXRhc2V0Lm5hbWUgPT09IG9iai50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJKRVNUIFRIRSBMRVNUIFlPVSBNRVNUIEZVQ0sgVEhFIFJFU1RcIilcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IHRvZG9MaXN0Q2hpbGRyZW5baV0uY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBjaGlsZHJlbi5sZW5ndGggPiBqOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHJlbltqXS5jbGFzc0xpc3QuY29udGFpbnMoXCJlZGl0LWNvbnRhaW5lclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltqXS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0xpc3RDaGlsZHJlbltpXS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlLXRvZG8taXRlbVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0xpc3RDaGlsZHJlbltpXS5jaGlsZHJlblswXS5jbGFzc0xpc3QudG9nZ2xlKFwiZWRpdC1jb250YWluZXItYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBhZGRQcm9qZWN0RXZlbnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUHJvamVjdEV2ZW50KCkge1xyXG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXByb2plY3RcIik7XHJcblxyXG4gICAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgY3JlYXRlUHJvamVjdElucHV0KGFkZFByb2plY3RCdG4pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3RJbnB1dChhZGRCdG4pIHtcclxuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3RcIik7XHJcbiAgICBcclxuICAgIGNvbnN0IG5ld1Byb2plY3REaXYgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIG5ld1Byb2plY3REaXYuY2xhc3NOYW1lID0gXCJwcm9qZWN0LWFkZC1kaXZcIjtcclxuXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICBuZXdQcm9qZWN0VGl0bGUuY2xhc3NOYW1lID0gXCJwcm9qZWN0LWFkZC10aXRsZVwiO1xyXG5cclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ3Byb2plY3QtYWRkLWNhbmNlbCc7XHJcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiO1xyXG5cclxuICAgIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xhc3NOYW1lID0gJ3Byb2plY3QtYWRkLXN1Ym1pdCc7XHJcbiAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xyXG5cclxuICAgIGFkZEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgcHJvamVjdEV2ZW50cyhuZXdQcm9qZWN0VGl0bGUsIG5ld1Byb2plY3REaXYsIHN1Ym1pdEJ0biwgY2FuY2VsQnRuLCBhZGRCdG4pO1xyXG5cclxuICAgIG5ld1Byb2plY3REaXYuYXBwZW5kKG5ld1Byb2plY3RUaXRsZSwgc3VibWl0QnRuLCBjYW5jZWxCdG4pO1xyXG4gICAgcHJvamVjdExpc3QuYXBwZW5kKG5ld1Byb2plY3REaXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcm9qZWN0RXZlbnRzKHRpdGxlLCBkaXYsIHN1Ym1pdCwgY2FuY2VsLCBidXR0b24pIHtcclxuICAgIHN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgbGV0IHByb2plY3QgPSBjcmVhdGVQcm9qZWN0KHRpdGxlLnZhbHVlKTtcclxuICAgICAgICBjcmVhdGVQcm9qZWN0SXRlbShwcm9qZWN0KTtcclxuICAgICAgICBkaXYucmVtb3ZlKCk7XHJcbiAgICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhbmNlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjtcclxuICAgICAgICBkaXYucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVGFzaygpIHtcclxuICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stYWRkXCIpO1xyXG5cclxuICAgIGFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICAgIGxldCBwcm9qZWN0TmFtZSA9IGdldFByb2plY3ROYW1lKCk7XHJcblxyXG4gICAgICAgIGNyZWF0ZVRhc2tJbnB1dChhZGRUYXNrQnRuKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVUYXNrSW5wdXQoKSB7XHJcbiAgICBjb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb1wiKTtcclxuICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stYWRkXCIpO1xyXG5cclxuICAgIGNvbnN0IG5ld1RvZG9JdGVtRGl2ICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBuZXdUb2RvSXRlbURpdi5jbGFzc05hbWUgPSBcInRhc2stYWRkLWlucHV0XCI7XHJcblxyXG4gICAgY29uc3QgbmV3VG9kb0l0ZW1OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgbmV3VG9kb0l0ZW1OYW1lLmNsYXNzTmFtZSA9IFwidGFzay1hZGQtdGl0bGVcIjtcclxuXHJcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgY2FuY2VsQnRuLmNsYXNzTmFtZSA9ICd0YXNrLWFkZC1jYW5jZWwnO1xyXG4gICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcclxuXHJcbiAgICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsYXNzTmFtZSA9ICd0YXNrLWFkZC1zdWJtaXQnO1xyXG4gICAgc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTdWJtaXRcIjtcclxuXHJcbiAgICBhZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICBuZXdUb2RvSXRlbURpdi5hcHBlbmQobmV3VG9kb0l0ZW1OYW1lLCBzdWJtaXRCdG4sIGNhbmNlbEJ0bik7XHJcbiAgICBtYWluQ29udGVudC5hcHBlbmQobmV3VG9kb0l0ZW1EaXYpO1xyXG5cclxuICAgIGFkZEV2ZW50c1RvVGFza0lucHV0KHN1Ym1pdEJ0biwgY2FuY2VsQnRuLCBuZXdUb2RvSXRlbU5hbWUsIG5ld1RvZG9JdGVtRGl2KVxyXG5cclxuICAgIHJldHVybiBuZXdUb2RvSXRlbU5hbWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEV2ZW50c1RvVGFza0lucHV0KHN1Ym1pdCwgY2FuY2VsLCB0aXRsZSwgZGl2KSB7XHJcbiAgICBjb25zdCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWFkZFwiKTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBnZXRQcm9qZWN0TmFtZSgpO1xyXG5cclxuICAgIHN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7ICAgICAgICBcclxuICAgICAgICBjcmVhdGVUb2RvKHRpdGxlLnZhbHVlLCBwcm9qZWN0KTtcclxuICAgICAgICB0YWIocHJvamVjdCk7XHJcbiAgICAgICAgYWRkVGFza0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XHJcbiAgICAgICAgZGl2LnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBhZGRUYXNrQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjtcclxuICAgICAgICBkaXYucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UHJvamVjdE5hbWUoKSB7XHJcbiAgICBjb25zdCBhY3RpdmVDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpO1xyXG4gICAgbGV0IHByb2plY3ROYW1lID0gYWN0aXZlQ2xhc3MuZGF0YXNldC5uYW1lO1xyXG5cclxuICAgIHJldHVybiBwcm9qZWN0TmFtZTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIGNyZWF0ZVRhc2tJbnB1dFxyXG59IiwiaW1wb3J0IHthZGRUb2RvVG9Qcm9qZWN0LCBnZXRMb2NhbFN0b3JhZ2VQcm9qZWN0c30gZnJvbSAnLi9wcm9qZWN0cy5qcyc7XHJcbmltcG9ydCB7Y3JlYXRlVGFza0lucHV0fSBmcm9tICcuL2RvbS5qcyc7XHJcblxyXG5sZXQgdG9kb0xpc3QgPSBbXTtcclxuXHJcbmNsYXNzIFRvZG8ge1xyXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uID0gXCJcIiwgZHVlRGF0ZSA9IFwiTm8gRHVlIERhdGVcIiwgcHJpb3JpdHkgPSA1LCBub3RlcyA9IFwiXCIpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIHRoaXMubm90ZXMgPSBub3RlcztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZWRpdFRvZG8ob2JqLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0TmFtZSkge1xyXG4gICAgbGV0IHZhbHVlID0gY2hlY2tJZkVtcHR5KHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSk7XHJcblxyXG4gICAgbGV0IGxvY2FsUHJvamVjdHMgPSBnZXRMb2NhbFN0b3JhZ2VQcm9qZWN0cygpO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGxvY2FsUHJvamVjdHMubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgaWYobG9jYWxQcm9qZWN0c1tpXS50aXRsZSA9PT0gcHJvamVjdE5hbWUpIHtcclxuICAgICAgICAgICAgbGV0IG9sZEtleSA9IGxvY2FsUHJvamVjdHNbaV1bXCJ0b2RvTGlzdFwiXVtvYmoudGl0bGVdO1xyXG5cclxuICAgICAgICAgICAgbG9jYWxQcm9qZWN0c1tpXVtcInRvZG9MaXN0XCJdW3RpdGxlXSA9IG9sZEtleTtcclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZSBsb2NhbFByb2plY3RzW2ldW1widG9kb0xpc3RcIl1bb2JqLnRpdGxlXTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0b2RvSXRlbSA9IGxvY2FsUHJvamVjdHNbaV1bXCJ0b2RvTGlzdFwiXVt0aXRsZV0gPSBvbGRLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZih2YWx1ZSA9PT0gXCJubyB0aXRsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIlRpdGxlIGNhbm5vdCBiZSBlbXB0eSFcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0b2RvSXRlbVsndGl0bGUnXSA9IHRpdGxlO1xyXG4gICAgICAgICAgICAgICAgdG9kb0l0ZW1bJ2Rlc2NyaXB0aW9uJ10gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIHRvZG9JdGVtWydkdWVEYXRlJ10gPSBkdWVEYXRlO1xyXG4gICAgICAgICAgICAgICAgdG9kb0l0ZW1bJ3ByaW9yaXR5J10gPSBwYXJzZUludChwcmlvcml0eSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyB2YWx1ZS5sZW5ndGggPj0gaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWVbaV0gPT09IFwiTm8gRHVlIERhdGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvSXRlbVsnZHVlRGF0ZSddID0gXCJObyBEdWUgRGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgdmFsdWVbaV0gPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0l0ZW1bJ3ByaW9yaXR5J10gPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShsb2NhbFByb2plY3RzKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSWZFbXB0eSh0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHkpIHtcclxuICAgIGxldCBhcnJheSA9IFtdO1xyXG4gICAgaWYodGl0bGUgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIFwibm8gdGl0bGVcIjtcclxuICAgIH1cclxuICAgIGlmKGR1ZURhdGUgPT09ICcnKSB7XHJcbiAgICAgICAgYXJyYXkucHVzaChcIk5vIER1ZSBEYXRlXCIpO1xyXG4gICAgfVxyXG4gICAgaWYocHJpb3JpdHkgPT09ICcnKSB7XHJcbiAgICAgICAgYXJyYXkucHVzaCg1KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRvZG8odGl0bGUsIHByb2plY3QpIHtcclxuICAgIGxldCB2YWx1ZSA9IGNoZWNrSWZBdmFpbGFibGUodGl0bGUsIHByb2plY3QpO1xyXG5cclxuICAgIGlmKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgIGFsZXJ0KFwiVG9kbyBpdGVtIG11c3QgYmUgZGlmZmVyZW50XCIpO1xyXG4gICAgICAgIGNyZWF0ZVRhc2tJbnB1dChwcm9qZWN0KTtcclxuICAgIH0gZWxzZSBpZih2YWx1ZSA9PT0gXCJibGFua1wiKSB7XHJcbiAgICAgICAgYWxlcnQoXCJUb2RvIGl0ZW0gbXVzdCBub3QgYmUgYmxhbmtcIik7XHJcbiAgICAgICAgY3JlYXRlVGFza0lucHV0KHByb2plY3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBuZXdUb2RvID0gbmV3IFRvZG8odGl0bGUpO1xyXG5cclxuICAgICAgICBhZGRUb2RvVG9Qcm9qZWN0KHByb2plY3QsIG5ld1RvZG8pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0lmQXZhaWxhYmxlKHRvZG8sIHByb2plY3QpIHtcclxuICAgIGxldCBsb2NhbFN0b3JhZ2UgPSBnZXRMb2NhbFN0b3JhZ2VQcm9qZWN0cygpO1xyXG5cclxuICAgIGlmKHRvZG8gPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiYmxhbmtcIjtcclxuICAgIH1cclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFN0b3JhZ2UubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgaWYobG9jYWxTdG9yYWdlW2ldLnRpdGxlID09PSBwcm9qZWN0KSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgcHJvcCBpbiBsb2NhbFN0b3JhZ2VbaV1bXCJ0b2RvTGlzdFwiXSkge1xyXG4gICAgICAgICAgICAgICAgaWYocHJvcCA9PT0gdG9kbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIFRvZG8sXHJcbiAgICBjcmVhdGVUb2RvLFxyXG4gICAgZWRpdFRvZG9cclxufSIsImltcG9ydCB7UHJvamVjdCwgY3JlYXRlUHJvamVjdHMsIGFkZFRvZG9Ub1Byb2plY3R9IGZyb20gJy4vcHJvamVjdHMuanMnXHJcbmltcG9ydCB7VG9kb30gZnJvbSAnLi90b2RvLmpzJ1xyXG5pbXBvcnQgaW5pdGlhbGl6YXRpb24gZnJvbSAnLi9kb20uanMnOyBcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XHJcbiAgICBjaGVja0lmRmlyc3RUaW1lKCk7XHJcbiAgICBwYWdlTG9hZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdlTG9hZCgpIHtcclxuICAgIGluaXRpYWxpemF0aW9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSWZGaXJzdFRpbWUoKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmlyc3RUaW1lJyk7XHJcblxyXG4gICAgaWYodmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmlyc3RUaW1lJywgJ2ZhbHNlJyk7XHJcblxyXG4gICAgICAgIGZpcnN0VGltZUluaXRpYWxpemF0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpcnN0VGltZUluaXRpYWxpemF0aW9uKCkge1xyXG4gICAgY29uc3QgaW5ib3ggPSBuZXcgUHJvamVjdCgnaW5ib3gnKTtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IFByb2plY3QoJ3RvZGF5Jyk7XHJcbiAgICBjb25zdCB1cGNvbWluZyA9IG5ldyBQcm9qZWN0KCd1cGNvbWluZycpO1xyXG5cclxuICAgIGNvbnN0IGZpcnN0UHJvamVjdCA9IG5ldyBUb2RvKCdDb21wbGV0ZSB0aGUgVG9kbyBMaXN0IFByb2plY3QnLCAnVGhlIE9kaW4gUHJvamVjdCBUb2RvIFByb2plY3QhJywgJzIwMjItMDctMTInLCA1LCAnJyk7XHJcblxyXG4gICAgY3JlYXRlUHJvamVjdHMoaW5ib3gsIHRvZGF5LCB1cGNvbWluZyk7XHJcblxyXG4gICAgYWRkVG9kb1RvUHJvamVjdChpbmJveC50aXRsZSwgZmlyc3RQcm9qZWN0KTtcclxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsInByb2plY3RzIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJzZWFyY2hGb3JQcm9qZWN0IiwicHJvamVjdCIsImxvY2FsUHJvamVjdHMiLCJnZXRMb2NhbFN0b3JhZ2VQcm9qZWN0cyIsImkiLCJhZGRUb2RvVG9Qcm9qZWN0IiwicHJvamVjdE5hbWUiLCJ0b2RvSXRlbSIsInRvZG9MaXN0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImdldEl0ZW0iLCJwcm90b3R5cGUiLCJjaGFuZ2VUaXRsZSIsIm5ld1RpdGxlIiwidGFiIiwidG9kbyIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInRvZG9UaXRsZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmQiLCJwcm9wIiwiZWxlbWVudCIsIkRPTWNyZWF0ZVRvZG9JdGVtIiwiY3JlYXRlUHJvamVjdEl0ZW0iLCJwcm9qZWN0T2JqIiwibWFpblByb2plY3RDb250YWluZXIiLCJwcm9qZWN0Q29udGFpbmVyIiwiZGF0YXNldCIsIm5hbWUiLCJwcm9qZWN0SWNvbiIsIkltYWdlIiwicHJvamVjdFRpdGxlIiwicHJvamVjdERlbGV0ZSIsInN0eWxlIiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhY3RpdmVDbGFzcyIsInJlbW92ZSIsImZpbHRlcmVkUHJvamVjdHMiLCJmaWx0ZXIiLCJpdGVtIiwiZGVsZXRlUHJvamVjdCIsImluZGV4IiwibGlzdCIsImNoaWxkcmVuIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJsaUFycmF5IiwiaiIsInRvZ2dsZSIsIm9iaiIsInRvZG9JdGVtQ29udGFpbmVyIiwiY2lyY2xlIiwidG9kb0RhdGUiLCJkdWVEYXRlIiwidG9kb0VkaXQiLCJkZWxldGVUb2RvSXRlbSIsIkRPTWVkaXRUb2RvSXRlbSIsImNvbnRhaW5lciIsImFkZCIsImdldFByb2plY3ROYW1lIiwiZWRpdENvbnRhaW5lciIsImVkaXRUaXRsZUxhYmVsIiwic2V0QXR0cmlidXRlIiwiZWRpdFRpdGxlIiwidmFsdWUiLCJlZGl0RGF0ZUxhYmVsIiwiZWRpdERhdGUiLCJlZGl0UHJpb3JpdHlMYWJlbCIsImVkaXRQcmlvcml0eSIsInByaW9yaXR5IiwiZWRpdERlc2NyaXB0aW9uTGFiZWwiLCJlZGl0RGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInBsYWNlaG9sZGVyIiwic2F2ZUJ1dHRvbiIsImFycmF5IiwicHVzaCIsImNoZWNrSWZFbXB0eSIsIm9sZEtleSIsImFsZXJ0IiwicGFyc2VJbnQiLCJlZGl0VG9kbyIsInRvZG9MaXN0Q2hpbGRyZW4iLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlVGFza0lucHV0IiwibWFpbkNvbnRlbnQiLCJhZGRUYXNrQnRuIiwibmV3VG9kb0l0ZW1EaXYiLCJuZXdUb2RvSXRlbU5hbWUiLCJjYW5jZWxCdG4iLCJzdWJtaXRCdG4iLCJzdWJtaXQiLCJjYW5jZWwiLCJkaXYiLCJhZGRUYXNrQnV0dG9uIiwiVG9kbyIsImNyZWF0ZVRvZG8iLCJhZGRFdmVudHNUb1Rhc2tJbnB1dCIsIm5vdGVzIiwiaW5ib3giLCJ0b2RheSIsInVwY29taW5nIiwiZmlyc3RQcm9qZWN0IiwiYXJncyIsImNyZWF0ZVByb2plY3RzIiwiZmlyc3RUaW1lSW5pdGlhbGl6YXRpb24iLCJhZGRQcm9qZWN0c1RvTGlzdCIsImFkZFByb2plY3RCdG4iLCJhZGRCdG4iLCJwcm9qZWN0TGlzdCIsIm5ld1Byb2plY3REaXYiLCJuZXdQcm9qZWN0VGl0bGUiLCJidXR0b24iLCJjaGVja0lmQXZhaWxhYmxlIiwiY3JlYXRlUHJvamVjdCIsImNyZWF0ZVByb2plY3RJbnB1dCIsImFkZFByb2plY3RFdmVudCJdLCJzb3VyY2VSb290IjoiIn0=