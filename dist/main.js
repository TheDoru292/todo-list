(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();let e=[];class n{constructor(t){this.title=t}}function o(t){let e=l();for(let n=0;e.length>n;n++)if(e[n].title===t)return e[n]}function i(t,e){let n=o(t);n.todoList,function(t,e){let n=l();for(let o=0;n.length>o;o++)n[o].title===t.title&&(n[o].todoList[`${e.title}`]=e);localStorage.setItem("projects",JSON.stringify(n))}(n,e)}function l(){return JSON.parse(localStorage.getItem("projects"))}n.prototype.changeTitle=function(t){this.title=t};const c=t.p+"e3b6ef0fc8b1ecd5d1a9.svg",s=t.p+"8d317290131028fe10cf.svg",a=t.p+"365f3e7f182c9f913994.svg",r=t.p+"97d4c0a10ac97607dc65.svg";function d(t){const e=document.querySelector(".todo-list");e.textContent="";const n=document.createElement("h1");n.className="tab-title";let o=JSON.parse(localStorage.getItem("projects"));for(let i=0;o.length>i;i++)if(o[i].title===t){n.textContent=o[i].title,e.append(n);for(const n in o[i].todoList){let l=p(o[i].todoList[n],t);e.append(l)}}}function u(t){const e=document.querySelector(".project-list"),n=document.createElement("li");n.className="project",n.dataset.name=t.title;const o=new Image;o.src=a;const i=document.createElement("p");i.textContent=t.title;const c=new Image;c.style.display="none",c.src=r,i.addEventListener("click",(e=>{m(n),d(t.title)})),n.addEventListener("mouseover",(t=>{c.style.display="block"})),n.addEventListener("mouseout",(t=>{c.style.display="none"})),c.addEventListener("click",(e=>{n.remove(),function(t){let e=l();for(let n=0;e.length>n;n++)if(e[n].title===t){delete e[n];let t=e.filter((t=>t));localStorage.setItem("projects",JSON.stringify(t))}}(t.title);let o=document.querySelector('[data-name="inbox"]');d("inbox"),m(o)})),n.append(o,i,c),e.append(n)}function m(t){let e=document.querySelector(".sidebar").children;for(let t=0;e.length>t;t++)if(e[t].classList.contains("main-list")||e[t].classList.contains("project-list")){let n=e[t].children[0].children;for(let t=0;n.length>t;t++)n[t].classList.contains("active")&&n[t].classList.toggle("active")}t.classList.toggle("active")}function p(t,e){const n=document.createElement("div");n.className="todo-item-container",n.dataset.name=t.title;const o=document.createElement("div");o.className="todo-item";const i=new Image;i.src=c,i.className="todo-item-checkmark";const a=document.createElement("p");a.className="todo-item-title",a.textContent=t.title;const r=document.createElement("p");r.textContent=t.dueDate;const d=new Image;return d.className="todo-item-edit",d.src=s,i.addEventListener("click",(n=>{o.remove(),function(t,e){let n=l();for(let o=0;n.length>o;o++)n[o].title===e&&(delete n[o].todoList[`${t.title}`],localStorage.setItem("projects",JSON.stringify(n)))}(t,e)})),o.addEventListener("mouseover",(t=>{d.style.display="block"})),o.addEventListener("mouseout",(t=>{d.style.display="none"})),a.addEventListener("click",(e=>{f(t,n,o,d)})),d.addEventListener("click",(e=>{f(t,n,o,d)})),o.append(i,a,r,d),n.append(o),n}function f(t,e,n,i){if(!0===e.classList.contains("active-todo-item"))document.querySelector(".edit-container").remove(),e.classList.toggle("active-todo-item"),n.classList.toggle("edit-container-active");else{n.classList.add("edit-container-active"),i.style.display="block",o(v());let c=document.createElement("div");c.className="edit-container";let s=document.createElement("label");s.className="edit-title-label",s.setAttribute("for","edit-title"),s.textContent="Title:";let a=document.createElement("input");a.setAttribute("id","edit-title"),a.value=t.title;let r=document.createElement("label");r.textContent="Due Date:",r.setAttribute("for","edit-date");let u=document.createElement("input");u.setAttribute("id","edit-date"),u.setAttribute("type","date");let m=document.createElement("label");m.className="edit-priority-label",m.setAttribute("for","edit-priority"),m.textContent="Priority:";let p=document.createElement("input");p.setAttribute("id","edit-priority"),p.setAttribute("type","number"),p.setAttribute("max",5),p.setAttribute("min",1),p.value=t.priority;let f=document.createElement("label");f.setAttribute("for","edit-description"),f.textContent="Description:";let g=document.createElement("textarea");g.setAttribute("id","edit-description"),g.value=t.description,g.placeholder="abcd your description comes here I think";let y=document.createElement("button");y.className="edit-save",y.textContent="Save",y.addEventListener("click",(e=>{let n=v();!function(t,e,n,o,i,c){let s=function(t,e,n){let o=[];return""===t?"no title":(""===e&&o.push("No Due Date"),""===n&&o.push(5),o)}(e,o,i),a=l();for(let l=0;a.length>l;l++)if(a[l].title===c){let c=a[l].todoList[t.title];a[l].todoList[e]=c,delete a[l].todoList[t.title];let r=a[l].todoList[e]=c;if("no title"===s)alert("Title cannot be empty!");else{r.title=e,r.description=n,r.dueDate=o,r.priority=parseInt(i);for(let t=0;s.length>=t;t++)"No Due Date"===s[t]&&(r.dueDate="No Due Date"),"number"==typeof s[t]&&(r.priority=5)}}localStorage.setItem("projects",JSON.stringify(a))}(t,a.value,g.value,u.value,p.value,n),d(n)})),c.append(s,a,m,p,f,g,r,u,y),e.append(c),e.classList.add("active-todo-item")}let c=document.querySelector(".todo-list").children;for(let e=0;c.length>e;e++)if(c[e].classList.contains("active-todo-item"))if(c[e].dataset.name===t.title)console.log("JEST THE LEST YOU MEST FUCK THE REST");else{let t=c[e].children;for(let n=0;t.length>n;n++)t[n].classList.contains("edit-container")&&(t[n].remove(),c[e].classList.toggle("active-todo-item"),c[e].children[0].classList.toggle("edit-container-active"))}}function g(){const t=document.querySelector(".todo"),e=document.querySelector(".task-add"),n=document.createElement("div");n.className="task-add-input";const o=document.createElement("input");o.className="task-add-title";const c=document.createElement("button");c.className="task-add-cancel",c.textContent="Cancel";const s=document.createElement("button");return s.className="task-add-submit",s.textContent="Submit",e.style.display="none",n.append(o,s,c),t.append(n),function(t,e,n,o){const c=document.querySelector(".task-add"),s=v();t.addEventListener("click",(t=>{!function(t,e){let n=function(t,e){let n=l();if(""===t)return"blank";for(let o=0;n.length>o;o++)if(n[o].title===e)for(let e in n[o].todoList)if(e===t)return!1}(t,e);!1===n?(alert("Todo item must be different"),g()):"blank"===n?(alert("Todo item must not be blank"),g()):i(e,new y(t))}(n.value,s),d(s),c.style.display="grid",o.remove()})),e.addEventListener("click",(t=>{c.style.display="grid",o.remove()}))}(s,c,o,n),o}function v(){return document.querySelector(".active").dataset.name}class y{constructor(t,e="",n="No Due Date",o=5,i=""){this.title=t,this.description=e,this.dueDate=n,this.priority=o,this.notes=i}}null===localStorage.getItem("firstTime")&&(localStorage.setItem("firstTime","false"),function(){const t=new n("inbox"),o=new n("today"),l=new n("upcoming"),c=new y("Complete the Todo List Project","The Odin Project Todo Project!","2022-07-12",5,"");(function(...t){for(let n=0;t.length>n;n++){let o={title:t[n].title,todoList:{}};e.push(o)}localStorage.setItem("projects",JSON.stringify(e))})(t,o,l),i(t.title,c)}()),d("inbox"),function(){let t=l();for(let e=0;t.length>e;e++)"inbox"===t[e].title||"today"===t[e].title||"upcoming"===t[e].title?console.log("wut"):u(t[e])}(),document.querySelector(".task-add").addEventListener("click",(t=>{v(),g()})),function(){const t=document.querySelector(".add-project");t.addEventListener("click",(e=>{!function(t){const e=document.querySelector(".project-list"),n=document.createElement("div");n.className="project-add-div";const o=document.createElement("input");o.className="project-add-title";const i=document.createElement("button");i.className="project-add-cancel",i.textContent="Cancel";const c=document.createElement("button");var s,a,r,d;c.className="project-add-submit",c.textContent="Submit",t.style.display="none",s=o,a=n,r=i,d=t,c.addEventListener("click",(t=>{!function(t){let e=function(t){let e=l();if(""===t)return"blank";for(let n=0;e.length>n;n++)if(console.log[e[n].title],e[n].title===t)return!0}(t);if(!0===e)alert("Project names must be different");else if("blank"===e)alert("Project names must not be blank");else{let e=l(),n={title:t,todoList:{}};e.push(n),localStorage.setItem("projects",JSON.stringify(e))}}(s.value)})),r.addEventListener("click",(t=>{d.style.display="grid",a.remove()})),n.append(o,c,i),e.append(n)}(t)}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFOcUJKLEVBQXRCbEIsRUFPdkN6RCxpQkFBaUIsU0FBUzNELEtEdFJyQyxTQUF1QndCLEdBQ25CLElBQUlpRSxFQXFCUixTQUEwQmpFLEdBQ3RCLElBQUlHLEVBQWVOLElBRW5CLEdBQW1CLEtBQWhCRyxFQUNDLE1BQU8sUUFHWCxJQUFJLElBQUlGLEVBQUksRUFBR0ssRUFBYWpCLE9BQVNZLEVBQUdBLElBR3BDLEdBRkFzRixRQUFRQyxJQUFJbEYsRUFBYUwsR0FBR0wsT0FFekJVLEVBQWFMLEdBQUdMLFFBQVVPLEVBQ3pCLE9BQU8sQ0FHbkIsQ0FuQ2dCbUgsQ0FBaUJuSCxHQUU3QixJQUFhLElBQVZpRSxFQUNDZSxNQUFNLHdDQUNILEdBQWEsVUFBVmYsRUFDTmUsTUFBTSx1Q0FDSCxDQUNILElBQUlwRixFQUFnQkMsSUFFaEJGLEVBQVUsQ0FDVixNQUFTSyxFQUNULFNBQVksQ0FFWixHQUdKSixFQUFjaUYsS0FBS2xGLEdBQ25CUSxhQUFhQyxRQUFRLFdBQVlDLEtBQUtDLFVBQVVWLEdBQ3BELENBQ0osQ0NtUVF3SCxDQUFjM0gsRUFBTXdFLE1BQU0sSUFHOUI2QixFQUFPM0QsaUJBQWlCLFNBQVMzRCxJQUM3QjBJLEVBQU9qRixNQUFNQyxRQUFVLE9BQ3ZCNkQsRUFBSTFELFFBQVEsSUFYaEIyRSxFQUFjN0YsT0FBTzhGLEVBQWlCckIsRUFBV0QsR0FDakRvQixFQUFZNUYsT0FBTzZGLEVBQ3ZCLENBM0JRSyxDQUFtQlIsRUFBYyxHQUV6QyxDQVRJUyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvd2Vic2l0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImxldCBwcm9qZWN0cyA9IFtdO1xyXG5cclxuY2xhc3MgUHJvamVjdCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIH1cclxufVxyXG5cclxuUHJvamVjdC5wcm90b3R5cGUuY2hhbmdlVGl0bGUgPSBmdW5jdGlvbihuZXdUaXRsZSkge1xyXG4gICAgdGhpcy50aXRsZSA9IG5ld1RpdGxlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0KHByb2plY3ROYW1lKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBjaGVja0lmQXZhaWxhYmxlKHByb2plY3ROYW1lKTtcclxuXHJcbiAgICBpZih2YWx1ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGFsZXJ0KFwiUHJvamVjdCBuYW1lcyBtdXN0IGJlIGRpZmZlcmVudFwiKTtcclxuICAgIH0gZWxzZSBpZih2YWx1ZSA9PT0gXCJibGFua1wiKSB7XHJcbiAgICAgICAgYWxlcnQoXCJQcm9qZWN0IG5hbWVzIG11c3Qgbm90IGJlIGJsYW5rXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgbG9jYWxQcm9qZWN0cyA9IGdldExvY2FsU3RvcmFnZVByb2plY3RzKCk7XHJcblxyXG4gICAgICAgIGxldCBwcm9qZWN0ID0ge1xyXG4gICAgICAgICAgICBcInRpdGxlXCI6IHByb2plY3ROYW1lLFxyXG4gICAgICAgICAgICBcInRvZG9MaXN0XCI6IHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBsb2NhbFByb2plY3RzLnB1c2gocHJvamVjdCk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkobG9jYWxQcm9qZWN0cykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0lmQXZhaWxhYmxlKHByb2plY3ROYW1lKSB7XHJcbiAgICBsZXQgbG9jYWxTdG9yYWdlID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBpZihwcm9qZWN0TmFtZSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gXCJibGFua1wiO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGxvY2FsU3RvcmFnZS5sZW5ndGggPiBpOyBpKyspIHtcclxuICAgICAgICBjb25zb2xlLmxvZ1tsb2NhbFN0b3JhZ2VbaV0udGl0bGVdO1xyXG5cclxuICAgICAgICBpZihsb2NhbFN0b3JhZ2VbaV0udGl0bGUgPT09IHByb2plY3ROYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdHMoLi4uYXJncykgeyAgICBcclxuICAgIGZvcihsZXQgaSA9IDA7IGFyZ3MubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHRpdGxlID0gYXJnc1tpXS50aXRsZTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdmFsdWUgPSB7XHJcbiAgICAgICAgICAgIFwidGl0bGVcIjogdGl0bGUsXHJcbiAgICAgICAgICAgIFwidG9kb0xpc3RcIjoge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvamVjdHMucHVzaCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZWFyY2hGb3JQcm9qZWN0KHByb2plY3QpIHtcclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QpIHtcclxuICAgICAgICAgICAgbGV0IHByb2plY3QgPSBsb2NhbFByb2plY3RzW2ldO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlYXJjaEZvclRvZG9JblByb2plY3QocHJvamVjdCwgdG9kb0l0ZW0pIHtcclxuICAgIGxldCByZXN1bHQgPSBwcm9qZWN0LnRvZG9MaXN0W2Ake3RvZG9JdGVtfWBdO1xyXG5cclxuICAgIGlmKHJlc3VsdCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIHJldHVybiBcIk9vcHNpZXNcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9kb1RvUHJvamVjdChwcm9qZWN0TmFtZSwgdG9kb0l0ZW0pIHtcclxuICAgIGxldCBwcm9qZWN0ID0gc2VhcmNoRm9yUHJvamVjdChwcm9qZWN0TmFtZSk7XHJcblxyXG4gICAgaWYocHJvamVjdC50b2RvTGlzdCA9PT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgIHRvZG9MaXN0KHByb2plY3QsIHRvZG9JdGVtKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9kb0xpc3QocHJvamVjdCwgdG9kb0l0ZW0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9kb0xpc3QocHJvamVjdCwgdG9kb0l0ZW0pIHtcclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QudGl0bGUpIHtcclxuXHJcbiAgICAgICAgICAgIGxvY2FsUHJvamVjdHNbaV1bXCJ0b2RvTGlzdFwiXVtgJHt0b2RvSXRlbS50aXRsZX1gXSA9IHRvZG9JdGVtO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShsb2NhbFByb2plY3RzKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVRvZG9JdGVtKG9iaiwgcHJvamVjdCkge1xyXG5cclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGxvY2FsUHJvamVjdHNbaV1bXCJ0b2RvTGlzdFwiXVtgJHtvYmoudGl0bGV9YF07XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShsb2NhbFByb2plY3RzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVQcm9qZWN0KHByb2plY3QpIHtcclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3QpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGxvY2FsUHJvamVjdHNbaV07XHJcblxyXG4gICAgICAgICAgICBsZXQgZmlsdGVyZWRQcm9qZWN0cyA9IGxvY2FsUHJvamVjdHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSk7XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZFByb2plY3RzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2VQcm9qZWN0cygpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpKTtcclxufVxyXG5cclxuLy8gZ2V0IGl0ZW1zIGZyb20gTG9jYWwgU3RvcmFnZVxyXG4vLyAgICAgbGV0IGNvbnNvbGVSZWFkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdHMnKSk7XHJcblxyXG5leHBvcnQge1xyXG4gICAgUHJvamVjdCxcclxuICAgIGNyZWF0ZVByb2plY3RzLFxyXG4gICAgY3JlYXRlUHJvamVjdCxcclxuICAgIGFkZFRvZG9Ub1Byb2plY3QsXHJcbiAgICBkZWxldGVUb2RvSXRlbSxcclxuICAgIHNlYXJjaEZvclByb2plY3QsXHJcbiAgICBzZWFyY2hGb3JUb2RvSW5Qcm9qZWN0LFxyXG4gICAgZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMsXHJcbiAgICBkZWxldGVQcm9qZWN0XHJcbn0iLCJpbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBkZWxldGVUb2RvSXRlbSwgZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMsIHNlYXJjaEZvclByb2plY3QsIGRlbGV0ZVByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xyXG5pbXBvcnQgQ2lyY2xlSWNvbiBmcm9tIFwiLi4vZGlzdC9pbWFnZXMvY2lyY2xlLnN2Z1wiO1xyXG5pbXBvcnQgRWRpdEljb24gZnJvbSBcIi4uL2Rpc3QvaW1hZ2VzL3BlbmNpbC5zdmdcIjtcclxuaW1wb3J0IGxpc3RJY29uIGZyb20gXCIuLi9kaXN0L2ltYWdlcy9mb3JtYXQtbGlzdC1idWxsZXRlZC5zdmdcIjtcclxuaW1wb3J0IGRlbGV0ZUljb24gZnJvbSBcIi4uL2Rpc3QvaW1hZ2VzL2Nsb3NlLnN2Z1wiXHJcbmltcG9ydCB7IGNyZWF0ZVRvZG8sIGVkaXRUb2RvIH0gZnJvbSBcIi4vdG9kby5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdGlhbGl6YXRpb24oKSB7XHJcbiAgICB0YWIoXCJpbmJveFwiKTtcclxuICAgIGFkZFByb2plY3RzVG9MaXN0KCk7XHJcbiAgICBhZGRUYXNrKCk7XHJcbiAgICBldmVudExpc3RlbmVycygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0YWIocHJvamVjdCkge1xyXG4gICAgY29uc3QgdG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1saXN0XCIpO1xyXG4gICAgdG9kby50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XHJcbiAgICB0b2RvVGl0bGUuY2xhc3NOYW1lID0gXCJ0YWItdGl0bGVcIjtcclxuXHJcbiAgICBsZXQgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBwcm9qZWN0cy5sZW5ndGggPiBpOyBpKyspIHtcclxuICAgICAgICBpZihwcm9qZWN0c1tpXS50aXRsZSA9PT0gcHJvamVjdCkge1xyXG4gICAgICAgICAgICB0b2RvVGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0c1tpXS50aXRsZTtcclxuICAgICAgICAgICAgdG9kby5hcHBlbmQodG9kb1RpdGxlKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihjb25zdCBwcm9wIGluIHByb2plY3RzW2ldLnRvZG9MaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqID0gcHJvamVjdHNbaV0udG9kb0xpc3RbcHJvcF07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBET01jcmVhdGVUb2RvSXRlbShvYmosIHByb2plY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRvZG8uYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQcm9qZWN0c1RvTGlzdCgpIHtcclxuICAgIGxldCBwcm9qZWN0cyA9IGdldExvY2FsU3RvcmFnZVByb2plY3RzKCk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgcHJvamVjdHMubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgaWYocHJvamVjdHNbaV0udGl0bGUgPT09IFwiaW5ib3hcIiB8fCBwcm9qZWN0c1tpXS50aXRsZSA9PT0gXCJ0b2RheVwiIHx8IHByb2plY3RzW2ldLnRpdGxlID09PSBcInVwY29taW5nXCIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3dXRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3JlYXRlUHJvamVjdEl0ZW0ocHJvamVjdHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdEl0ZW0ocHJvamVjdE9iaikge1xyXG4gICAgY29uc3QgbWFpblByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKTtcclxuICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTmFtZSA9IFwicHJvamVjdFwiO1xyXG4gICAgcHJvamVjdENvbnRhaW5lci5kYXRhc2V0Lm5hbWUgPSBwcm9qZWN0T2JqLnRpdGxlO1xyXG5cclxuICAgIGNvbnN0IHByb2plY3RJY29uID0gbmV3IEltYWdlKCk7XHJcbiAgICBwcm9qZWN0SWNvbi5zcmMgPSBsaXN0SWNvbjtcclxuXHJcbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RPYmoudGl0bGU7XHJcblxyXG4gICAgY29uc3QgcHJvamVjdERlbGV0ZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgcHJvamVjdERlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBwcm9qZWN0RGVsZXRlLnNyYyA9IGRlbGV0ZUljb247XHJcblxyXG4gICAgcHJvamVjdFRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBhY3RpdmVDbGFzcyhwcm9qZWN0Q29udGFpbmVyKTtcclxuICAgICAgICBcclxuICAgICAgICB0YWIocHJvamVjdE9iai50aXRsZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBwcm9qZWN0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZSA9PiB7XHJcbiAgICAgICAgcHJvamVjdERlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvamVjdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZSA9PiB7XHJcbiAgICAgICAgcHJvamVjdERlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICBwcm9qZWN0RGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgICAgIGRlbGV0ZVByb2plY3QocHJvamVjdE9iai50aXRsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGluZGV4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cImluYm94XCJdJyk7XHJcbiAgICAgICAgdGFiKFwiaW5ib3hcIik7XHJcbiAgICAgICAgYWN0aXZlQ2xhc3MoaW5kZXgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmQocHJvamVjdEljb24sIHByb2plY3RUaXRsZSwgcHJvamVjdERlbGV0ZSk7XHJcbiAgICBtYWluUHJvamVjdENvbnRhaW5lci5hcHBlbmQocHJvamVjdENvbnRhaW5lcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGl2ZUNsYXNzKGVsZW1lbnQpIHtcclxuICAgIGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyXCIpLmNoaWxkcmVuO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGxpc3QubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgaWYobGlzdFtpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJtYWluLWxpc3RcIikgfHwgbGlzdFtpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9qZWN0LWxpc3RcIikpIHtcclxuICAgICAgICAgICAgbGV0IGxpQXJyYXkgPSBsaXN0W2ldLmNoaWxkcmVuWzBdLmNoaWxkcmVuO1xyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgbGlBcnJheS5sZW5ndGggPiBqOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKGxpQXJyYXlbal0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlBcnJheVtqXS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBET01jcmVhdGVUb2RvSXRlbShvYmosIHByb2plY3QpIHtcclxuICAgIGNvbnN0IHRvZG9JdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRvZG9JdGVtQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwidG9kby1pdGVtLWNvbnRhaW5lclwiO1xyXG4gICAgdG9kb0l0ZW1Db250YWluZXIuZGF0YXNldC5uYW1lID0gb2JqLnRpdGxlO1xyXG5cclxuICAgIGNvbnN0IHRvZG9JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRvZG9JdGVtLmNsYXNzTmFtZSA9IFwidG9kby1pdGVtXCI7XHJcblxyXG4gICAgY29uc3QgY2lyY2xlID0gbmV3IEltYWdlKCk7XHJcbiAgICBjaXJjbGUuc3JjID0gQ2lyY2xlSWNvbjtcclxuICAgIGNpcmNsZS5jbGFzc05hbWUgPSBcInRvZG8taXRlbS1jaGVja21hcmtcIjtcclxuXHJcbiAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIHRvZG9UaXRsZS5jbGFzc05hbWUgPSBcInRvZG8taXRlbS10aXRsZVwiO1xyXG4gICAgdG9kb1RpdGxlLnRleHRDb250ZW50ID0gb2JqLnRpdGxlO1xyXG5cclxuICAgIGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICB0b2RvRGF0ZS50ZXh0Q29udGVudCA9IG9iai5kdWVEYXRlO1xyXG5cclxuICAgIGNvbnN0IHRvZG9FZGl0ID0gbmV3IEltYWdlKCk7XHJcbiAgICB0b2RvRWRpdC5jbGFzc05hbWUgPSBcInRvZG8taXRlbS1lZGl0XCI7XHJcbiAgICB0b2RvRWRpdC5zcmMgPSBFZGl0SWNvbjtcclxuXHJcbiAgICBjaXJjbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICAgIHRvZG9JdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIGRlbGV0ZVRvZG9JdGVtKG9iaiwgcHJvamVjdCk7XHJcbiAgICB9KVxyXG5cclxuICAgIHRvZG9JdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZSA9PiB7XHJcbiAgICAgICAgdG9kb0VkaXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0b2RvSXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZSA9PiB7XHJcbiAgICAgICAgdG9kb0VkaXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH0pO1xyXG5cclxuICAgIHRvZG9UaXRsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgRE9NZWRpdFRvZG9JdGVtKG9iaiwgdG9kb0l0ZW1Db250YWluZXIsIHRvZG9JdGVtLCB0b2RvRWRpdCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0b2RvRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgRE9NZWRpdFRvZG9JdGVtKG9iaiwgdG9kb0l0ZW1Db250YWluZXIsIHRvZG9JdGVtLCB0b2RvRWRpdCk7XHJcbiAgICB9KVxyXG5cclxuICAgIHRvZG9JdGVtLmFwcGVuZChjaXJjbGUsIHRvZG9UaXRsZSwgdG9kb0RhdGUsIHRvZG9FZGl0KTtcclxuICAgIHRvZG9JdGVtQ29udGFpbmVyLmFwcGVuZCh0b2RvSXRlbSk7XHJcblxyXG4gICAgcmV0dXJuIHRvZG9JdGVtQ29udGFpbmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBET01lZGl0VG9kb0l0ZW0ob2JqLCBjb250YWluZXIsIHRvZG9JdGVtQ29udGFpbmVyLCB0b2RvRWRpdCkge1xyXG4gICAgaWYoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS10b2RvLWl0ZW1cIikgPT09IHRydWUpIHtcclxuICAgICAgICBsZXQgZWRpdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1jb250YWluZXJcIik7XHJcbiAgICAgICAgZWRpdENvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZS10b2RvLWl0ZW1cIik7XHJcbiAgICAgICAgdG9kb0l0ZW1Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImVkaXQtY29udGFpbmVyLWFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9kb0l0ZW1Db250YWluZXIuY2xhc3NMaXN0LmFkZChcImVkaXQtY29udGFpbmVyLWFjdGl2ZVwiKTtcclxuICAgICAgICB0b2RvRWRpdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBnZXRQcm9qZWN0TmFtZSgpO1xyXG4gICAgICAgIGxldCBwcm9qZWN0ID0gc2VhcmNoRm9yUHJvamVjdChwcm9qZWN0TmFtZSk7XHJcbiAgICBcclxuICAgICAgICBsZXQgZWRpdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWRpdENvbnRhaW5lci5jbGFzc05hbWUgPSBcImVkaXQtY29udGFpbmVyXCI7XHJcblxyXG4gICAgICAgIGxldCBlZGl0VGl0bGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBlZGl0VGl0bGVMYWJlbC5jbGFzc05hbWUgPSBcImVkaXQtdGl0bGUtbGFiZWxcIjtcclxuICAgICAgICBlZGl0VGl0bGVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJlZGl0LXRpdGxlXCIpO1xyXG4gICAgICAgIGVkaXRUaXRsZUxhYmVsLnRleHRDb250ZW50ID0gXCJUaXRsZTpcIlxyXG5cclxuICAgICAgICBsZXQgZWRpdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGVkaXRUaXRsZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImVkaXQtdGl0bGVcIik7XHJcbiAgICAgICAgZWRpdFRpdGxlLnZhbHVlID0gb2JqLnRpdGxlO1xyXG5cclxuICAgICAgICBsZXQgZWRpdERhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBlZGl0RGF0ZUxhYmVsLnRleHRDb250ZW50ID0gXCJEdWUgRGF0ZTpcIlxyXG4gICAgICAgIGVkaXREYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZWRpdC1kYXRlXCIpO1xyXG5cclxuICAgICAgICBsZXQgZWRpdERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgZWRpdERhdGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJlZGl0LWRhdGVcIik7XHJcbiAgICAgICAgZWRpdERhdGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XHJcblxyXG4gICAgICAgIGxldCBlZGl0UHJpb3JpdHlMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBlZGl0UHJpb3JpdHlMYWJlbC5jbGFzc05hbWUgPSBcImVkaXQtcHJpb3JpdHktbGFiZWxcIjtcclxuICAgICAgICBlZGl0UHJpb3JpdHlMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJlZGl0LXByaW9yaXR5XCIpO1xyXG4gICAgICAgIGVkaXRQcmlvcml0eUxhYmVsLnRleHRDb250ZW50ID0gXCJQcmlvcml0eTpcIjtcclxuXHJcbiAgICAgICAgbGV0IGVkaXRQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBlZGl0UHJpb3JpdHkuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJlZGl0LXByaW9yaXR5XCIpXHJcbiAgICAgICAgZWRpdFByaW9yaXR5LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJudW1iZXJcIik7XHJcbiAgICAgICAgZWRpdFByaW9yaXR5LnNldEF0dHJpYnV0ZShcIm1heFwiLCA1KTtcclxuICAgICAgICBlZGl0UHJpb3JpdHkuc2V0QXR0cmlidXRlKFwibWluXCIsIDEpO1xyXG4gICAgICAgIGVkaXRQcmlvcml0eS52YWx1ZSA9IG9iai5wcmlvcml0eTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgZWRpdERlc2NyaXB0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICAgICAgZWRpdERlc2NyaXB0aW9uTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZWRpdC1kZXNjcmlwdGlvblwiKTtcclxuICAgICAgICBlZGl0RGVzY3JpcHRpb25MYWJlbC50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb246XCI7XHJcblxyXG4gICAgICAgIGxldCBlZGl0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcbiAgICAgICAgZWRpdERlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZWRpdC1kZXNjcmlwdGlvblwiKTtcclxuICAgICAgICBlZGl0RGVzY3JpcHRpb24udmFsdWUgPSBvYmouZGVzY3JpcHRpb247XHJcbiAgICAgICAgZWRpdERlc2NyaXB0aW9uLnBsYWNlaG9sZGVyID0gXCJhYmNkIHlvdXIgZGVzY3JpcHRpb24gY29tZXMgaGVyZSBJIHRoaW5rXCI7XHJcblxyXG4gICAgICAgIGxldCBzYXZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBzYXZlQnV0dG9uLmNsYXNzTmFtZSA9IFwiZWRpdC1zYXZlXCI7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG5cclxuICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICAgICAgbGV0IHByb2plY3ROYW1lID0gZ2V0UHJvamVjdE5hbWUoKTtcclxuICAgICAgICAgICAgZWRpdFRvZG8ob2JqLCBlZGl0VGl0bGUudmFsdWUsIGVkaXREZXNjcmlwdGlvbi52YWx1ZSwgZWRpdERhdGUudmFsdWUsIGVkaXRQcmlvcml0eS52YWx1ZSwgcHJvamVjdE5hbWUpO1xyXG4gICAgICAgICAgICB0YWIocHJvamVjdE5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlZGl0Q29udGFpbmVyLmFwcGVuZChlZGl0VGl0bGVMYWJlbCwgZWRpdFRpdGxlLCBlZGl0UHJpb3JpdHlMYWJlbCwgZWRpdFByaW9yaXR5LCBlZGl0RGVzY3JpcHRpb25MYWJlbCwgZWRpdERlc2NyaXB0aW9uLCBlZGl0RGF0ZUxhYmVsLCBlZGl0RGF0ZSwgc2F2ZUJ1dHRvbik7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZChlZGl0Q29udGFpbmVyKTtcclxuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS10b2RvLWl0ZW1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tbGlzdFwiKTtcclxuICAgIGxldCB0b2RvTGlzdENoaWxkcmVuID0gdG9kb0xpc3QuY2hpbGRyZW47XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgdG9kb0xpc3RDaGlsZHJlbi5sZW5ndGggPiBpOyBpKyspIHtcclxuICAgICAgICBpZih0b2RvTGlzdENoaWxkcmVuW2ldLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS10b2RvLWl0ZW1cIikpIHtcclxuICAgICAgICAgICAgaWYodG9kb0xpc3RDaGlsZHJlbltpXS5kYXRhc2V0Lm5hbWUgPT09IG9iai50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJKRVNUIFRIRSBMRVNUIFlPVSBNRVNUIEZVQ0sgVEhFIFJFU1RcIilcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IHRvZG9MaXN0Q2hpbGRyZW5baV0uY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBjaGlsZHJlbi5sZW5ndGggPiBqOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHJlbltqXS5jbGFzc0xpc3QuY29udGFpbnMoXCJlZGl0LWNvbnRhaW5lclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltqXS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0xpc3RDaGlsZHJlbltpXS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlLXRvZG8taXRlbVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0xpc3RDaGlsZHJlbltpXS5jaGlsZHJlblswXS5jbGFzc0xpc3QudG9nZ2xlKFwiZWRpdC1jb250YWluZXItYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBhZGRQcm9qZWN0RXZlbnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUHJvamVjdEV2ZW50KCkge1xyXG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXByb2plY3RcIik7XHJcblxyXG4gICAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgY3JlYXRlUHJvamVjdElucHV0KGFkZFByb2plY3RCdG4pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3RJbnB1dChhZGRCdG4pIHtcclxuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3RcIik7XHJcbiAgICBcclxuICAgIGNvbnN0IG5ld1Byb2plY3REaXYgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIG5ld1Byb2plY3REaXYuY2xhc3NOYW1lID0gXCJwcm9qZWN0LWFkZC1kaXZcIjtcclxuXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICBuZXdQcm9qZWN0VGl0bGUuY2xhc3NOYW1lID0gXCJwcm9qZWN0LWFkZC10aXRsZVwiO1xyXG5cclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ3Byb2plY3QtYWRkLWNhbmNlbCc7XHJcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiO1xyXG5cclxuICAgIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xhc3NOYW1lID0gJ3Byb2plY3QtYWRkLXN1Ym1pdCc7XHJcbiAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xyXG5cclxuICAgIGFkZEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgcHJvamVjdEV2ZW50cyhuZXdQcm9qZWN0VGl0bGUsIG5ld1Byb2plY3REaXYsIHN1Ym1pdEJ0biwgY2FuY2VsQnRuLCBhZGRCdG4pO1xyXG5cclxuICAgIG5ld1Byb2plY3REaXYuYXBwZW5kKG5ld1Byb2plY3RUaXRsZSwgc3VibWl0QnRuLCBjYW5jZWxCdG4pO1xyXG4gICAgcHJvamVjdExpc3QuYXBwZW5kKG5ld1Byb2plY3REaXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcm9qZWN0RXZlbnRzKHRpdGxlLCBkaXYsIHN1Ym1pdCwgY2FuY2VsLCBidXR0b24pIHtcclxuICAgIHN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgY3JlYXRlUHJvamVjdCh0aXRsZS52YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICAgIGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XHJcbiAgICAgICAgZGl2LnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFRhc2soKSB7XHJcbiAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWFkZFwiKTtcclxuXHJcbiAgICBhZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBnZXRQcm9qZWN0TmFtZSgpO1xyXG5cclxuICAgICAgICBjcmVhdGVUYXNrSW5wdXQoYWRkVGFza0J0bik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGFza0lucHV0KCkge1xyXG4gICAgY29uc3QgbWFpbkNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9cIik7XHJcbiAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWFkZFwiKTtcclxuXHJcbiAgICBjb25zdCBuZXdUb2RvSXRlbURpdiAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgbmV3VG9kb0l0ZW1EaXYuY2xhc3NOYW1lID0gXCJ0YXNrLWFkZC1pbnB1dFwiO1xyXG5cclxuICAgIGNvbnN0IG5ld1RvZG9JdGVtTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgIG5ld1RvZG9JdGVtTmFtZS5jbGFzc05hbWUgPSBcInRhc2stYWRkLXRpdGxlXCI7XHJcblxyXG4gICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIGNhbmNlbEJ0bi5jbGFzc05hbWUgPSAndGFzay1hZGQtY2FuY2VsJztcclxuICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCI7XHJcblxyXG4gICAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGFzc05hbWUgPSAndGFzay1hZGQtc3VibWl0JztcclxuICAgIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU3VibWl0XCI7XHJcblxyXG4gICAgYWRkVGFza0J0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgbmV3VG9kb0l0ZW1EaXYuYXBwZW5kKG5ld1RvZG9JdGVtTmFtZSwgc3VibWl0QnRuLCBjYW5jZWxCdG4pO1xyXG4gICAgbWFpbkNvbnRlbnQuYXBwZW5kKG5ld1RvZG9JdGVtRGl2KTtcclxuXHJcbiAgICBhZGRFdmVudHNUb1Rhc2tJbnB1dChzdWJtaXRCdG4sIGNhbmNlbEJ0biwgbmV3VG9kb0l0ZW1OYW1lLCBuZXdUb2RvSXRlbURpdilcclxuXHJcbiAgICByZXR1cm4gbmV3VG9kb0l0ZW1OYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRFdmVudHNUb1Rhc2tJbnB1dChzdWJtaXQsIGNhbmNlbCwgdGl0bGUsIGRpdikge1xyXG4gICAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1hZGRcIik7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gZ2V0UHJvamVjdE5hbWUoKTtcclxuXHJcbiAgICBzdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4geyAgICAgICAgXHJcbiAgICAgICAgY3JlYXRlVG9kbyh0aXRsZS52YWx1ZSwgcHJvamVjdCk7XHJcbiAgICAgICAgdGFiKHByb2plY3QpO1xyXG4gICAgICAgIGFkZFRhc2tCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiZ3JpZFwiO1xyXG4gICAgICAgIGRpdi5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhbmNlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgYWRkVGFza0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XHJcbiAgICAgICAgZGl2LnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFByb2plY3ROYW1lKCkge1xyXG4gICAgY29uc3QgYWN0aXZlQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjdGl2ZVwiKTtcclxuICAgIGxldCBwcm9qZWN0TmFtZSA9IGFjdGl2ZUNsYXNzLmRhdGFzZXQubmFtZTtcclxuXHJcbiAgICByZXR1cm4gcHJvamVjdE5hbWU7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBjcmVhdGVUYXNrSW5wdXRcclxufSIsImltcG9ydCB7YWRkVG9kb1RvUHJvamVjdCwgZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHN9IGZyb20gJy4vcHJvamVjdHMuanMnO1xyXG5pbXBvcnQge2NyZWF0ZVRhc2tJbnB1dH0gZnJvbSAnLi9kb20uanMnO1xyXG5cclxubGV0IHRvZG9MaXN0ID0gW107XHJcblxyXG5jbGFzcyBUb2RvIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiA9IFwiXCIsIGR1ZURhdGUgPSBcIk5vIER1ZSBEYXRlXCIsIHByaW9yaXR5ID0gNSwgbm90ZXMgPSBcIlwiKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICAgICAgICB0aGlzLm5vdGVzID0gbm90ZXM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVkaXRUb2RvKG9iaiwgdGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdE5hbWUpIHtcclxuICAgIGxldCB2YWx1ZSA9IGNoZWNrSWZFbXB0eSh0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHkpO1xyXG5cclxuICAgIGxldCBsb2NhbFByb2plY3RzID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBsb2NhbFByb2plY3RzLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsUHJvamVjdHNbaV0udGl0bGUgPT09IHByb2plY3ROYW1lKSB7XHJcbiAgICAgICAgICAgIGxldCBvbGRLZXkgPSBsb2NhbFByb2plY3RzW2ldW1widG9kb0xpc3RcIl1bb2JqLnRpdGxlXTtcclxuXHJcbiAgICAgICAgICAgIGxvY2FsUHJvamVjdHNbaV1bXCJ0b2RvTGlzdFwiXVt0aXRsZV0gPSBvbGRLZXk7XHJcblxyXG4gICAgICAgICAgICBkZWxldGUgbG9jYWxQcm9qZWN0c1tpXVtcInRvZG9MaXN0XCJdW29iai50aXRsZV07XHJcblxyXG4gICAgICAgICAgICBsZXQgdG9kb0l0ZW0gPSBsb2NhbFByb2plY3RzW2ldW1widG9kb0xpc3RcIl1bdGl0bGVdID0gb2xkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYodmFsdWUgPT09IFwibm8gdGl0bGVcIikge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJUaXRsZSBjYW5ub3QgYmUgZW1wdHkhXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdG9kb0l0ZW1bJ3RpdGxlJ10gPSB0aXRsZTtcclxuICAgICAgICAgICAgICAgIHRvZG9JdGVtWydkZXNjcmlwdGlvbiddID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICB0b2RvSXRlbVsnZHVlRGF0ZSddID0gZHVlRGF0ZTtcclxuICAgICAgICAgICAgICAgIHRvZG9JdGVtWydwcmlvcml0eSddID0gcGFyc2VJbnQocHJpb3JpdHkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgdmFsdWUubGVuZ3RoID49IGk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlW2ldID09PSBcIk5vIER1ZSBEYXRlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0l0ZW1bJ2R1ZURhdGUnXSA9IFwiTm8gRHVlIERhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIHZhbHVlW2ldID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9JdGVtWydwcmlvcml0eSddID0gNTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkobG9jYWxQcm9qZWN0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0lmRW1wdHkodGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5KSB7XHJcbiAgICBsZXQgYXJyYXkgPSBbXTtcclxuICAgIGlmKHRpdGxlID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiBcIm5vIHRpdGxlXCI7XHJcbiAgICB9XHJcbiAgICBpZihkdWVEYXRlID09PSAnJykge1xyXG4gICAgICAgIGFycmF5LnB1c2goXCJObyBEdWUgRGF0ZVwiKTtcclxuICAgIH1cclxuICAgIGlmKHByaW9yaXR5ID09PSAnJykge1xyXG4gICAgICAgIGFycmF5LnB1c2goNSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVUb2RvKHRpdGxlLCBwcm9qZWN0KSB7XHJcbiAgICBsZXQgdmFsdWUgPSBjaGVja0lmQXZhaWxhYmxlKHRpdGxlLCBwcm9qZWN0KTtcclxuXHJcbiAgICBpZih2YWx1ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICBhbGVydChcIlRvZG8gaXRlbSBtdXN0IGJlIGRpZmZlcmVudFwiKTtcclxuICAgICAgICBjcmVhdGVUYXNrSW5wdXQocHJvamVjdCk7XHJcbiAgICB9IGVsc2UgaWYodmFsdWUgPT09IFwiYmxhbmtcIikge1xyXG4gICAgICAgIGFsZXJ0KFwiVG9kbyBpdGVtIG11c3Qgbm90IGJlIGJsYW5rXCIpO1xyXG4gICAgICAgIGNyZWF0ZVRhc2tJbnB1dChwcm9qZWN0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbmV3VG9kbyA9IG5ldyBUb2RvKHRpdGxlKTtcclxuXHJcbiAgICAgICAgYWRkVG9kb1RvUHJvamVjdChwcm9qZWN0LCBuZXdUb2RvKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tJZkF2YWlsYWJsZSh0b2RvLCBwcm9qZWN0KSB7XHJcbiAgICBsZXQgbG9jYWxTdG9yYWdlID0gZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMoKTtcclxuXHJcbiAgICBpZih0b2RvID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiBcImJsYW5rXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgbG9jYWxTdG9yYWdlLmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgIGlmKGxvY2FsU3RvcmFnZVtpXS50aXRsZSA9PT0gcHJvamVjdCkge1xyXG4gICAgICAgICAgICBmb3IobGV0IHByb3AgaW4gbG9jYWxTdG9yYWdlW2ldW1widG9kb0xpc3RcIl0pIHtcclxuICAgICAgICAgICAgICAgIGlmKHByb3AgPT09IHRvZG8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBUb2RvLFxyXG4gICAgY3JlYXRlVG9kbyxcclxuICAgIGVkaXRUb2RvXHJcbn0iLCJpbXBvcnQge1Byb2plY3QsIGNyZWF0ZVByb2plY3RzLCBhZGRUb2RvVG9Qcm9qZWN0fSBmcm9tICcuL3Byb2plY3RzLmpzJ1xyXG5pbXBvcnQge1RvZG99IGZyb20gJy4vdG9kby5qcydcclxuaW1wb3J0IGluaXRpYWxpemF0aW9uIGZyb20gJy4vZG9tLmpzJzsgXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xyXG4gICAgY2hlY2tJZkZpcnN0VGltZSgpO1xyXG4gICAgcGFnZUxvYWQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnZUxvYWQoKSB7XHJcbiAgICBpbml0aWFsaXphdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0lmRmlyc3RUaW1lKCkge1xyXG4gICAgbGV0IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZpcnN0VGltZScpO1xyXG5cclxuICAgIGlmKHZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZpcnN0VGltZScsICdmYWxzZScpO1xyXG5cclxuICAgICAgICBmaXJzdFRpbWVJbml0aWFsaXphdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaXJzdFRpbWVJbml0aWFsaXphdGlvbigpIHtcclxuICAgIGNvbnN0IGluYm94ID0gbmV3IFByb2plY3QoJ2luYm94Jyk7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBQcm9qZWN0KCd0b2RheScpO1xyXG4gICAgY29uc3QgdXBjb21pbmcgPSBuZXcgUHJvamVjdCgndXBjb21pbmcnKTtcclxuXHJcbiAgICBjb25zdCBmaXJzdFByb2plY3QgPSBuZXcgVG9kbygnQ29tcGxldGUgdGhlIFRvZG8gTGlzdCBQcm9qZWN0JywgJ1RoZSBPZGluIFByb2plY3QgVG9kbyBQcm9qZWN0IScsICcyMDIyLTA3LTEyJywgNSwgJycpO1xyXG5cclxuICAgIGNyZWF0ZVByb2plY3RzKGluYm94LCB0b2RheSwgdXBjb21pbmcpO1xyXG5cclxuICAgIGFkZFRvZG9Ub1Byb2plY3QoaW5ib3gudGl0bGUsIGZpcnN0UHJvamVjdCk7XHJcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJwcm9qZWN0cyIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwic2VhcmNoRm9yUHJvamVjdCIsInByb2plY3QiLCJsb2NhbFByb2plY3RzIiwiZ2V0TG9jYWxTdG9yYWdlUHJvamVjdHMiLCJpIiwiYWRkVG9kb1RvUHJvamVjdCIsInByb2plY3ROYW1lIiwidG9kb0l0ZW0iLCJ0b2RvTGlzdCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJnZXRJdGVtIiwicHJvdG90eXBlIiwiY2hhbmdlVGl0bGUiLCJuZXdUaXRsZSIsInRhYiIsInRvZG8iLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJ0b2RvVGl0bGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kIiwicHJvcCIsImVsZW1lbnQiLCJET01jcmVhdGVUb2RvSXRlbSIsImNyZWF0ZVByb2plY3RJdGVtIiwicHJvamVjdE9iaiIsIm1haW5Qcm9qZWN0Q29udGFpbmVyIiwicHJvamVjdENvbnRhaW5lciIsImRhdGFzZXQiLCJuYW1lIiwicHJvamVjdEljb24iLCJJbWFnZSIsInByb2plY3RUaXRsZSIsInByb2plY3REZWxldGUiLCJzdHlsZSIsImRpc3BsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwiYWN0aXZlQ2xhc3MiLCJyZW1vdmUiLCJmaWx0ZXJlZFByb2plY3RzIiwiZmlsdGVyIiwiaXRlbSIsImRlbGV0ZVByb2plY3QiLCJpbmRleCIsImxpc3QiLCJjaGlsZHJlbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwibGlBcnJheSIsImoiLCJ0b2dnbGUiLCJvYmoiLCJ0b2RvSXRlbUNvbnRhaW5lciIsImNpcmNsZSIsInRvZG9EYXRlIiwiZHVlRGF0ZSIsInRvZG9FZGl0IiwiZGVsZXRlVG9kb0l0ZW0iLCJET01lZGl0VG9kb0l0ZW0iLCJjb250YWluZXIiLCJhZGQiLCJnZXRQcm9qZWN0TmFtZSIsImVkaXRDb250YWluZXIiLCJlZGl0VGl0bGVMYWJlbCIsInNldEF0dHJpYnV0ZSIsImVkaXRUaXRsZSIsInZhbHVlIiwiZWRpdERhdGVMYWJlbCIsImVkaXREYXRlIiwiZWRpdFByaW9yaXR5TGFiZWwiLCJlZGl0UHJpb3JpdHkiLCJwcmlvcml0eSIsImVkaXREZXNjcmlwdGlvbkxhYmVsIiwiZWRpdERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJwbGFjZWhvbGRlciIsInNhdmVCdXR0b24iLCJhcnJheSIsInB1c2giLCJjaGVja0lmRW1wdHkiLCJvbGRLZXkiLCJhbGVydCIsInBhcnNlSW50IiwiZWRpdFRvZG8iLCJ0b2RvTGlzdENoaWxkcmVuIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZVRhc2tJbnB1dCIsIm1haW5Db250ZW50IiwiYWRkVGFza0J0biIsIm5ld1RvZG9JdGVtRGl2IiwibmV3VG9kb0l0ZW1OYW1lIiwiY2FuY2VsQnRuIiwic3VibWl0QnRuIiwic3VibWl0IiwiY2FuY2VsIiwiZGl2IiwiYWRkVGFza0J1dHRvbiIsIlRvZG8iLCJjcmVhdGVUb2RvIiwiYWRkRXZlbnRzVG9UYXNrSW5wdXQiLCJub3RlcyIsImluYm94IiwidG9kYXkiLCJ1cGNvbWluZyIsImZpcnN0UHJvamVjdCIsImFyZ3MiLCJjcmVhdGVQcm9qZWN0cyIsImZpcnN0VGltZUluaXRpYWxpemF0aW9uIiwiYWRkUHJvamVjdHNUb0xpc3QiLCJhZGRQcm9qZWN0QnRuIiwiYWRkQnRuIiwicHJvamVjdExpc3QiLCJuZXdQcm9qZWN0RGl2IiwibmV3UHJvamVjdFRpdGxlIiwiYnV0dG9uIiwiY2hlY2tJZkF2YWlsYWJsZSIsImNyZWF0ZVByb2plY3QiLCJjcmVhdGVQcm9qZWN0SW5wdXQiLCJhZGRQcm9qZWN0RXZlbnQiXSwic291cmNlUm9vdCI6IiJ9